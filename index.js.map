{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchPhotosByQuery(userQuery, pageNumber) {\n  try {\n    const axiosOptions = {\n      params: {\n        key: '48282955-b9198e6094f2e0ac61d0770f4',\n        q: userQuery,\n        page: pageNumber,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    };\n    const response = await axios.get('https://pixabay.com/api/', axiosOptions);\n    if (response.data.total === 0) return;\n    // throw new Error(\n    //   `Sorry, there are no images matching your search query. Please try again!`\n    // );\n\n    return response;\n  } catch (error) {\n    console.log(error.message);\n    throw error;\n  }\n}\n","export function createGalleryCardTemplate(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n        width = \"360px\"\n        // height = \"240px\"\n          class=\"gallery-image\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n        />\n      </a>\n      <div class=\"details\">\n        <div><p class=\"details-icon\">‚ù§Ô∏è</p><p>${likes}</p></div>\n        <div><p class=\"details-icon\">üëÅÔ∏è</p><p>${views}</p></div>\n        <div><p class=\"details-icon\">üí¨</p><p>${comments}</p></div>\n        <div><p class=\"details-icon\">‚¨áÔ∏è</p><p>${downloads}</p></div>\n      </div>\n    </li>\n  `;\n      }\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchPhotosByQuery } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\n\nconst galleryFromPixabay = document.querySelector('.gallery-from-pixabay');\nconst userSearchForm = document.querySelector('.user-search');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet page = 1;\nlet userQuery = '';\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captions: false,\n  captionDelay: 250,\n  widthRatio: 0.8,\n  heightRatio: 0.8,\n});\n\nfunction smoothScroll() {\n  const firstCard = galleryFromPixabay.firstElementChild;\n  if (!firstCard) return;\n  const cardHeight = firstCard.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nconst showError = error => {\n  iziToast.error({\n    title: '‚ùå',\n    message: error,\n    position: 'topRight',\n    progressBar: true,\n    close: false,\n    icon: false,\n    timeout: 3000,\n  });\n};\n\nconst loadMoreBtnHandler = async event => {\n  try {\n    page++;\n    loadMoreBtn.classList.add('hidden');\n    loader.classList.remove('hidden');\n\n    const response = await fetchPhotosByQuery(userQuery, page);\n    if (!response) {\n      showError(`We're sorry, but you've reached the end of search results.`);\n      return;\n    }\n    loader.classList.add('hidden');\n    const galleryTemplate = createGalleryCardTemplate(response.data.hits);\n    galleryFromPixabay.insertAdjacentHTML('beforeend', galleryTemplate);\n    lightbox.refresh();\n    smoothScroll();\n    if (lightbox.elements.length < response.data.totalHits) {\n      loadMoreBtn.classList.remove('hidden');\n    } else {\n      loadMoreBtn.removeEventListener('click', loadMoreBtnHandler);\n      showError(`We're sorry, but you've reached the end of search results.`);\n    }\n  } catch (error) {\n    showError(error.message);\n  }\n};\n\nconst inputSubmitHandler = async event => {\n  try {\n    event.preventDefault();\n\n    page = 1;\n    loadMoreBtn.classList.add('hidden');\n    userQuery = document.querySelector('.input-user-search').value.trim();\n    if (!userQuery) {\n      userSearchForm.reset();\n      throw new Error('The field must be filled!');\n    }\n    galleryFromPixabay.innerHTML = '';\n    loader.classList.remove('hidden');\n\n    const response = await fetchPhotosByQuery(userQuery, page);\n\n    if (!response) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    const galleryTemplate = createGalleryCardTemplate(response.data.hits);\n    galleryFromPixabay.innerHTML = galleryTemplate;\n    lightbox.refresh();\n    loader.classList.add('hidden');\n    userSearchForm.reset();\n    if (response.data.totalHits > 15) {\n      loadMoreBtn.classList.remove('hidden');\n      loadMoreBtn.addEventListener('click', loadMoreBtnHandler);\n    }\n  } catch (error) {\n    loader.classList.add('hidden');\n    userSearchForm.reset();\n    showError(error.message);\n  }\n};\n\nconst inputUserQuery = document.querySelector('.user-search');\ninputUserQuery.addEventListener('submit', inputSubmitHandler);\n"],"names":["fetchPhotosByQuery","userQuery","pageNumber","axiosOptions","response","axios","error","createGalleryCardTemplate","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryFromPixabay","userSearchForm","loader","loadMoreBtn","page","lightbox","SimpleLightbox","smoothScroll","firstCard","cardHeight","showError","iziToast","loadMoreBtnHandler","event","galleryTemplate","inputSubmitHandler","inputUserQuery"],"mappings":"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"}